#include <stdio.h>#include <string.h>#include <stdlib.h>#include "kernel_list.h"struct kernel_list{	int data;	struct list_head list; //内核链表};//节点初始化struct kernel_list *Kernel_list_Init(void){	struct kernel_list *P = (struct kernel_list *)malloc(sizeof(struct kernel_list));		if(P == NULL )		return NULL;			INIT_LIST_HEAD(&P->list); //对小结构体初始化		return P;}void Display_list(struct kernel_list *head){	struct kernel_list *tmp;		struct list_head *pos;		 	list_for_each(pos, &head->list)	{		//* @ptr:移动的小结构体对应的地址		//* @type: 大结构体类型 （struct info）		//* @member:小结构体在大结构体里面的成员名list	   tmp = list_entry(pos,struct kernel_list , list); 	   	   printf("数据：%d\n",tmp->data);			}  	}struct kernel_list *Find_node(struct kernel_list *head,int data){	struct list_head *pos,*n;	struct kernel_list *tmp;		list_for_each_safe(pos, n , &head->list)//安全遍历删除	{		tmp = list_entry(pos,struct kernel_list , list); 		if(tmp->data == data)			return tmp;	}	return NULL;}int main(void){	int data,i = 0;	struct kernel_list *new,*tmp;		struct kernel_list *head = Kernel_list_Init();		for(i=0; i<5; i++)	{		new = Kernel_list_Init();		printf("请输入数据：\n");		scanf("%d",&new->data);		printf("第%d节点地址：%p\n",i,new);		list_add(&new->list,&head->list); //传入的是小结构指针	}		printf("=======================================\n");		printf("请输入要查找的数据：\n");	scanf("%d",&data);	tmp = Find_node(head,data);	if(tmp != NULL)	{		printf("找到数据，数据：%d,节点地址：%p\n",tmp->data,tmp);		list_del(&tmp->list);  //传小结构体的地址		free(tmp);     //释放节点	}				Display_list(head);				return 0;}